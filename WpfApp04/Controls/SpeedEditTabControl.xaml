<UserControl x:Class="WpfApp04.Controls.SpeedEditTabControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:WpfApp04.Controls"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid  Background="#FFE5E5E5">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2.5*"/>
            <ColumnDefinition Width="5"/>
            <ColumnDefinition Width="3*"/>

        </Grid.ColumnDefinitions>
        <DataGrid x:Name="SpeedDataGrid"  
      AutoGenerateColumns="False" 
      Background="#FFF0F0F0" 
      HorizontalGridLinesBrush="Gray"
      SelectionMode="Single"
      SelectionUnit="FullRow" 
      VerticalGridLinesBrush="Gray" ColumnHeaderHeight="60" CanUserResizeRows="False" SelectionChanged="SpeedDataGrid_SelectionChanged" RowEditEnding="SpeedDataGrid_RowEditEnding"  >
            <DataGrid.Resources>
                <Style TargetType="{x:Type DataGridCell}">
                    <Style.Triggers>
                        <Trigger Property="DataGridCell.IsSelected" Value="True" >
                            <Setter Property="Background" Value="LightBlue" />
                        </Trigger>
                    </Style.Triggers>
                </Style>

            </DataGrid.Resources>
            <DataGrid.Columns>

                <DataGridTextColumn Header="станция / перегон" Width="120" Binding="{Binding Path=Station}" />
                <DataGridTextColumn Header="путь" Width="35" Binding="{Binding Path=TrackNumber}"/>
                <DataGridTextColumn Header="нач Км" Binding="{Binding Path=StartPointOnTrackKm}"/>
                <DataGridTextColumn Header="нач Пк" Binding="{Binding Path=StartPointOnTrackPk}"/>
                <DataGridTextColumn Header="нач М" Binding="{Binding Path=StartPointOnTrackM}"/>
                <DataGridTextColumn Header="кон Км" Binding="{Binding Path=EndPointOnTrackKm}"/>
                <DataGridTextColumn Header="кон Пк" Binding="{Binding Path=EndPointOnTrackPk}"/>
                <DataGridTextColumn Header="кон М" Binding="{Binding Path=EndPointOnTrackM}"/>
                <DataGridTextColumn Header="Км/ч" Binding="{Binding Path=Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                <DataGridCheckBoxColumn  Binding="{Binding Path=ForEmptytrainBool}" Width="55" >
                    <DataGridCheckBoxColumn.Header>
                        <TextBlock Text="для порожнего поезда" Width="65" TextWrapping="Wrap" />
                    </DataGridCheckBoxColumn.Header>
                </DataGridCheckBoxColumn>

                <DataGridCheckBoxColumn Binding="{Binding Path=OnlyHeaderBool}" Width="60" >
                    <DataGridCheckBoxColumn.Header>
                        <TextBlock Text="только головой" Width="60" TextWrapping="Wrap" />
                    </DataGridCheckBoxColumn.Header>
                </DataGridCheckBoxColumn>
                <DataGridTextColumn Binding="{Binding Path=StartRouteCoordinate}" Visibility="Hidden" >
                    <DataGridTextColumn.Header>
                        <TextBlock Text="Координата по маршруту" Width="100" TextWrapping="Wrap" />
                    </DataGridTextColumn.Header>
                </DataGridTextColumn>
                <DataGridTextColumn Binding="{Binding Path=ObjectLength}" Visibility="Visible" >
                    <DataGridTextColumn.Header>
                        <TextBlock Text="длина" Width="100" TextWrapping="Wrap" />
                    </DataGridTextColumn.Header>
                </DataGridTextColumn>
            </DataGrid.Columns>

        </DataGrid>

        <GridSplitter Grid.Column="1"  Grid.Row="0" Grid.ColumnSpan="1" ShowsPreview="False" Width="5"
HorizontalAlignment="Center" VerticalAlignment="Stretch" />


        <Button Name="AddSpeedButton" Grid.Column="2" Content="Добавить" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top" Width="84" Click="AddSpeedButton_Click"/>
        <Button Name="DeleteSpeedButton" Grid.Column="2" Content="Удалить" HorizontalAlignment="Left" Margin="10,35,0,0" VerticalAlignment="Top" Width="84" Click="DeleteSpeedButton_Click"/>
        <Button x:Name="DeleteAllSpeedButton" Grid.Column="2" Content="Удалить все" HorizontalAlignment="Left" Margin="10,60,0,0" VerticalAlignment="Top" Width="84" Click="DeleteAllSpeedButton_Click"/>
        <CheckBox Name="RouteCoordinateCheckBox" Grid.Column="2" Content="Координата по маршруту" HorizontalAlignment="Left" Margin="118,12,0,0" VerticalAlignment="Top" Checked="RouteCoordinateCheckBox_Checked" Unchecked="RouteCoordinateCheckBox_Unchecked" IsChecked="False" />
        <TextBox Grid.Column="2" Name="SegmentIdTextBox" HorizontalAlignment="Left" Margin="187,35,0,0" TextWrapping="Wrap" Text="" VerticalAlignment="Top" Width="51" Height="20" KeyDown="SegmentIdTextBox_KeyDown"/>
        <TextBlock Grid.Column="2" HorizontalAlignment="Left" Margin="119,35,0,0" TextWrapping="Wrap" Text="Segment Id:" VerticalAlignment="Top" Height="20"/>
        <Button x:Name="SetSpeedSegmentIdButton" Grid.Column="2" Content="Задать" HorizontalAlignment="Left" Margin="243,35,0,0" VerticalAlignment="Top" Width="47" Click="SetSpeedSegmentIdButton_Click"/>
        <Button x:Name="FillEmptySpeedsButton" 
                                        Grid.Column="2" 
                                        HorizontalAlignment="Left" 
                                        Margin="10,88,0,0" 
                                        VerticalAlignment="Top" Width="203" 
                                        Click="FillEmptySpeedsButton_Click" Height="22">
            <TextBlock Text="Заполнить пустые сегменты" 
                                               TextWrapping="Wrap" 
                                               TextAlignment="Center"/>
        </Button>
        <Button x:Name="SaveSpeedButton" Grid.Column="2" Content="Сохранить скорости" HorizontalAlignment="Left" Margin="323,10,0,0" VerticalAlignment="Top" Width="121" Click="SaveSpeedButton_Click"/>


    </Grid>
</UserControl>
